# 1 Base64简介
## 1.1 Base64算法
> Base64编码要求把3个8位字节（3*8=24）转化为4个6位的字节（4*6=24），之后在6位的前面补两个0，形成8位一个字节的形式。

> 最后转换生成的Base64字符个数，应该为4的倍数，如果不是4的倍数，则在后面添加字符等号=，凑成4的倍数，因此编码后输出的文本末尾可能会出现1或2个‘=’。

假设转换之前有N个字节字符串，则一共有N*8个bit位；则要拆分成6bit位时，拆分之后Base64字符个数为：N * 8 / 6;
- 如果N为3的倍数，则N * 8 / 6可以整除，并且结果为4的倍数；见下面例子2.1；
- 如果N不为3的倍数，且 N * 8 / 6 余数可能为2或4，
    - 余数为2时，在该2bit后添加4个0构成一个Base64字符，见例子2.2，
    - 余数为4时，在该4bit后添加2个0构成一个Base64字符，见例子2.3；

## 1.2 Base64对应的字符表

- Base64字符表组成部分：10个数字，26个大写字母，26个小写字母，1个+，一个 / 刚好64个字符

![image](https://img-blog.csdn.net/20160911232045203?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)

## 1.3 ASCII码表

![image](http://www.asciima.com/img/ascii_Table2.png)

# 2 Base64示例

## 2.1  对字符个数是N*8%6=0的字符串进行Base64编码

因为Base64的核心就是将3个字节转换成4个字节，因此如果字符个数是3的倍数，则转换之后的字符个数应该恰好为4的倍数；

数学表达：N*8%6=0


```
原文：      p           h         p
ASCII值：   112         104       112
对应ASCII： 01110000    01101000  01110000

每6位分割： 011100  000110  100001  110000
对应十进制：28      6       33      48
Base64字符：c       G       h       w

最后结果：Base64(php) --> cGhw
```

## 2.2 对字符个数为N*8%6=2的字符串进行base64编码

```
原文         ：r           a           n           l 
ASCII值      ：114         97          110         108
ASCII值二进制：01110010    01100001    01101110    01101100

每6位分割    ：011100    100110   000101   101110    011011    000000  xxxxxx  xxxxxx 
对应10进制值 ：28        38       5        46        27        0       =       =
base64字符   ：c         m        F        u         b         A       =       = 

结果： Base64(ranl) --> cmFubA==
```

## 2.3 对字符个数为N*8%6=4的字符串进行base64编码

```
原文          ：h          a           c           k           e
ASCII值       ：104        97          99          107         101
ASCII值二进制 ：01101000   01100001    01100011    01101011    01100101

每6位分割     ：011010    000110    000101   100011    011010    110110    010100    xxxxxx 
对应10进制值  ：26        6         5        35        26        54        20        =
对应base64字符: a         G         F        j         a         2         U         =

结果： Base64(hacke) --> aGFja2U=
```

